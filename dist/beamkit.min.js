!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).beamkit={})}(this,function(e){"use strict";function t(e,t){return e(t={exports:{}},t.exports),t.exports}const n={};var o={addEventListener:(e,t)=>(e in n||(n[e]=[]),n[e].push(t),()=>{n[e].splice(n[e].indexOf(t))}),dispatchEvent(e,...t){e in n&&n[e].forEach(e=>{e(...t)})},clearEventListeners(){for(let e in n)delete n[e]}},a=t(function(e,t){const n=t;n.camelize=(e=>e.toLowerCase().replace(/-([a-z])/gi,(e,t)=>t.toUpperCase())),n.decamelize=(e=>e.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)),n.merge=((e,t)=>{for(let n in t){if(!t.hasOwnProperty(n))continue;const o=t[n];void 0===o?e.hasOwnProperty(n)&&delete e[n]:e[n]=o}})}),r=t(function(e){const t=e.exports=function(e,n,...o){return"function"==typeof e?t.hFunc(e,n,...o):t.hTag(e,n,...o)};t.Fragment=((e,...n)=>{const o=document.createDocumentFragment();return t.addChildren(o,n),o}),t.hFunc=((e,t,...n)=>e(t,n)),t.hTag=((e,n,...r)=>{const s=document.createElement(e);if(s.data={},t.addChildren(s,r),n)for(let e in n){const t=n[e];if(null!=t)if("class"===e)s.className=t.trim();else if("for"===e)s.htmlFor=t.trim();else if("tabindex"===e)s.tabIndex=t;else if("style"===e)for(let e in t)s.style[e]=t[e];else if("data"===e)for(let e in t)t.hasOwnProperty(e)&&(s.data[e]=s.dataset[e]=t[e]);else if(e.startsWith("data-"))e=a.camelize(e.slice(5)),s.data[e]=s.dataset[e]=t;else if(e.startsWith("on")&&"string"==typeof t){const n=e,[a,...r]=t.split("."),c=r.includes("prevent"),l=r.includes("stop"),i=r.includes("once"),d=e=>{const t=e.target,{data:r,tagName:d}=t;(c||"FORM"===d)&&e.preventDefault(),l&&e.stopPropagation(),i&&(s[n]=null),"INPUT"===d&&"checkbox"===t.type?r.value=t.checked:null!=t.value&&(r.value=t.value),o.dispatchEvent(a,r,t,e)};s[e]=d}else s[e]=t}return s}),t.isTextNode=(e=>"object"!=typeof e&&null!=e),t.addChildren=((e,n)=>{const o=n.length;let a="";for(let r=0;r<o;r++){const o=n[r];a&&!t.isTextNode(o)&&(e.appendChild(document.createTextNode(a)),a=""),o instanceof HTMLElement||o instanceof DocumentFragment?e.appendChild(o):Array.isArray(o)?t.addChildren(e,o):t.isTextNode(o)&&(a=(a+" "+o).trim())}a&&e.appendChild(document.createTextNode(a))})}),s=t(function(e){const t=e.exports;t.convertToQs=(e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(`${n}=${encodeURIComponent(e[n])}`);return t.join("&")}),t.fromJSON=(e=>e.json()),t.plugins=[],t.request=(async(e,n,o,a)=>{void 0===a&&(a=o,o={});const r=o.data,s=o.ignorePlugins||[];o={method:e,headers:{...o.headers}},a.convert=a.convert||t.fromJSON,r&&("GET"===e?n+="?"+t.convertToQs(r):(o.body=JSON.stringify(r),o.headers={"Content-Type":"application/json"}));let c=(e,t)=>fetch(e,t);t.plugins.forEach(e=>{s.indexOf(e.key)>-1||(c=e(c))});try{const e=await c(n,o);204===e.status?(a.on204||a.ok)(null,204,e):200===e.status?(a.on200||a.ok)(await a.convert(e),200,e):e.status>=400?(a["on"+e.status]||a.err)(await a.convert(e),e.status,e):(a["on"+e.status]||a.other||a.err)(null,e.status,e)}catch(e){a.err(e,0)}}),t.GET=t.request.bind(null,"GET"),t.POST=t.request.bind(null,"POST"),t.PUT=t.request.bind(null,"PUT"),t.DELETE=t.request.bind(null,"DELETE"),t.addPlugin=(e=>t.plugins.push(e)),t.clearPlugins=(()=>t.plugins.length=0)}),c=t(function(e){const t=e.exports;t.location=window.location,t.history=window.history,t.localStorage=window.localStorage}),l=t(function(e,t){const n=t;n.coerce=(e=>""===e||(/^\d+(\.\d+)?$/.test(e)?parseFloat(e):"true"===e||"false"===e?"true"===e:"null"===e?null:e)),n.urlEncode=(e=>{const t=Object.keys(e);if(0===t.length)return"";t.sort();const n=[];return t.forEach(t=>{const o=e[t];t=a.decamelize(t),void 0!==o&&n.push(`${t}=${encodeURIComponent(o)}`)}),n.join("&")}),n.urlDecode=(e=>{const t={};return 0===e.length?t:(e.split("&").forEach(e=>{let[o,r=""]=e.split("=");r=n.coerce(decodeURIComponent(r)),t[a.camelize(o)]=r}),t)}),n.toUrl=(({path:e,query:t,hash:o})=>{let r="";return 0===e.length?r+="/":e.forEach(e=>{r+="/"+encodeURIComponent(a.decamelize(""+e))}),(t=n.urlEncode(t))&&(r+="?"+t),(o=n.urlEncode(o))&&(r+="#"+o),r}),n.getState=(()=>{let{pathname:e,search:t,hash:o}=c.location;const r={};return"/"===e?r.path=[]:(r.path=e.slice(1).replace(/\/\/+/g,"/").split("/"),r.path.forEach((e,t)=>{r.path[t]=n.coerce(a.camelize(decodeURIComponent(e)))})),r.query=n.urlDecode(t.slice(1)),r.hash=n.urlDecode(o.slice(1)),r}),n.swapState=(({path:e=[],query:t={},hash:a={}})=>{const r={path:e,query:t,hash:a};c.history.pushState(null,"",n.toUrl(r)),o.dispatchEvent("location-change",r)}),n.updateState=(e=>{const t=n.getState();e(t),n.swapState(t)}),n.patchLocation=(e=>t=>{e.path&&(t.path=e.path),e.query&&a.merge(t.query,e.query),e.hash&&a.merge(t.hash,e.hash)}),n.changeState=(e=>{n.updateState(n.patchLocation(e))}),n.updateUrl=(e=>{const t=n.getState();return n.patchLocation(e)(t),n.toUrl(t)}),window.addEventListener("popstate",()=>{o.dispatchEvent("location-change",n.getState())})}),i={h:r,hub:o,localHub:()=>{const e=[],t={dispatchEvent:o.dispatchEvent,addEventListener(t,n){e.push(o.addEventListener(t,n))},destroy(){e.forEach(e=>e()),e.length=0}};return t.addEventListener("module-destroy",t.destroy),t},xhr:s,urlstate:l,utils:a,browser:c},d=i.h,u=i.hub,h=i.localHub,p=i.xhr,f=i.urlstate,m=i.utils,g=i.browser;e.default=i,e.h=d,e.hub=u,e.localHub=h,e.xhr=p,e.urlstate=f,e.utils=m,e.browser=g,Object.defineProperty(e,"__esModule",{value:!0})});
