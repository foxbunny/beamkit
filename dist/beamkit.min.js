!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).beamkit={})}(this,function(e){"use strict";function t(e,t){return e(t={exports:{}},t.exports),t.exports}const n={};var o={addEventListener:(e,t)=>(e in n||(n[e]=[]),n[e].push(t),()=>{n[e].splice(n[e].indexOf(t))}),dispatchEvent(e,...t){e in n&&n[e].forEach(e=>{e(...t)})},clearEventListeners(){for(let e in n)delete n[e]}},s=t(function(e,t){const n=t;n.camelize=(e=>e.toLowerCase().replace(/-([a-z])/gi,(e,t)=>t.toUpperCase())),n.decamelize=(e=>e.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)),n.merge=((e,t)=>{for(let n in t){if(!t.hasOwnProperty(n))continue;const o=t[n];void 0===o?e.hasOwnProperty(n)&&delete e[n]:e[n]=o}})}),r=t(function(e){const t=e.exports=function(e,n,...o){return"function"==typeof e?t.hFunc(e,n,...o):t.hTag(e,n,...o)};t.Fragment=((e,...n)=>{const o=document.createDocumentFragment();return t.addChildren(o,n),o}),t.hFunc=((e,t,...n)=>e(t,n)),t.hTag=((e,n,...r)=>{const a=document.createElement(e);if(a.data={},t.addChildren(a,r),n)for(let e in n){const t=n[e];if(null!=t)if("class"===e)a.className=t.trim();else if("for"===e)a.htmlFor=t.trim();else if("tabindex"===e)a.tabIndex=t;else if("style"===e)for(let e in t)a.style[e]=t[e];else if("data"===e)for(let e in t)t.hasOwnProperty(e)&&(a.data[e]=a.dataset[e]=t[e]);else if(e.startsWith("data-"))e=s.camelize(e.slice(5)),a.data[e]=a.dataset[e]=t;else if(e.startsWith("on")&&"string"==typeof t){const n=e,[s,...r]=t.split("."),c=r.includes("prevent"),i=r.includes("stop"),l=r.includes("once"),d=e=>{const t=e.target,{data:r,tagName:d}=t;(c||"FORM"===d)&&e.preventDefault(),i&&e.stopPropagation(),l&&(a[n]=null),"INPUT"===d&&"checkbox"===t.type?r.value=t.checked:null!=t.value&&(r.value=t.value),o.dispatchEvent(s,r,t,e)};a[e]=d}else a[e]=t}return a}),t.isTextNode=(e=>"object"!=typeof e&&null!=e),t.addChildren=((e,n)=>{const o=n.length;let s="";for(let r=0;r<o;r++){const o=n[r];s&&!t.isTextNode(o)&&(e.appendChild(document.createTextNode(s)),s=""),o instanceof HTMLElement||o instanceof DocumentFragment?e.appendChild(o):Array.isArray(o)?t.addChildren(e,o):t.isTextNode(o)&&(s=(s+" "+o).trim())}s&&e.appendChild(document.createTextNode(s))})}),a=t(function(e){const t=e.exports;t.convertToQs=(e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(`${n}=${encodeURIComponent(e[n])}`);return t.join("&")}),t.fromJSON=(e=>e.json()),t.plugins=[],t.request=(async(e,n,o,s)=>{void 0===s&&(s=o,o={});const r=o.data,a=o.ignorePlugins||[];o={method:e,headers:{...o.headers}},s.convert=s.convert||t.fromJSON,r&&("GET"===e?n+="?"+t.convertToQs(r):(o.body=JSON.stringify(r),o.headers={"Content-Type":"application/json"}));let c=(e,t)=>fetch(e,t);t.plugins.forEach(e=>{a.indexOf(e.key)>-1||(c=e(c))});try{const e=await c(n,o);204===e.status?(s.on204||s.ok)(null,204,e):200===e.status?(s.on200||s.ok)(await s.convert(e),200,e):e.status>=400?(s["on"+e.status]||s.err)(await s.convert(e),e.status,e):(s["on"+e.status]||s.other||s.err)(null,e.status,e)}catch(e){s.err(e,0)}}),t.GET=t.request.bind(null,"GET"),t.POST=t.request.bind(null,"POST"),t.PUT=t.request.bind(null,"PUT"),t.DELETE=t.request.bind(null,"DELETE"),t.addPlugin=(e=>t.plugins.push(e)),t.clearPlugins=(()=>t.plugins.length=0)}),c=t(function(e){const t=e.exports;t.location=window.location,t.history=window.history,t.localStorage=window.localStorage}),i=t(function(e,t){const n=t;n.coerce=(e=>""===e||(/^\d+(\.\d+)?$/.test(e)?parseFloat(e):"true"===e||"false"===e?"true"===e:"null"===e?null:e)),n.urlEncode=(e=>{const t=Object.keys(e);if(0===t.length)return"";t.sort();const n=[];return t.forEach(t=>{const o=e[t];t=s.decamelize(t),void 0!==o&&n.push(`${t}=${encodeURIComponent(o)}`)}),n.join("&")}),n.urlDecode=(e=>{const t={};return 0===e.length?t:(e.split("&").forEach(e=>{let[o,r=""]=e.split("=");r=n.coerce(decodeURIComponent(r)),t[s.camelize(o)]=r}),t)}),n.toUrl=(({path:e,query:t,hash:o})=>{let r="";return 0===e.length?r+="/":e.forEach(e=>{r+="/"+encodeURIComponent(s.decamelize(""+e))}),(t=n.urlEncode(t))&&(r+="?"+t),(o=n.urlEncode(o))&&(r+="#"+o),r}),n.getState=(()=>{let{pathname:e,search:t,hash:o}=c.location;const r={};return"/"===e?r.path=[]:(r.path=e.slice(1).replace(/\/\/+/g,"/").split("/"),r.path.forEach((e,t)=>{r.path[t]=n.coerce(s.camelize(decodeURIComponent(e)))})),r.query=n.urlDecode(t.slice(1)),r.hash=n.urlDecode(o.slice(1)),r}),n.swapState=(({path:e=[],query:t={},hash:s={}})=>{const r={path:e,query:t,hash:s};c.history.pushState(null,"",n.toUrl(r)),o.dispatchEvent("location-change",r)}),n.updateState=(e=>{const t=n.getState();e(t),n.swapState(t)}),n.patchLocation=(e=>t=>{e.path&&(t.path=e.path),e.query&&s.merge(t.query,e.query),e.hash&&s.merge(t.hash,e.hash)}),n.changeState=(e=>{n.updateState(n.patchLocation(e))}),n.updateUrl=(e=>{const t=n.getState();return n.patchLocation(e)(t),n.toUrl(t)}),window.addEventListener("popstate",()=>{o.dispatchEvent("location-change",n.getState())})}),l=t(function(e){const t=e.exports;t.editList=((e,t,n)=>{let o=0,s=0,r=e.length-1,a=e[0],c=e[r],i=t.length-1,l=t[0],d=t[i];for(;o<=r&&s<=i;)if(a===l)n.keep(a),a=e[++o],l=t[++s];else if(c===d)n.keep(c),c=e[--r],d=t[--i];else if(a===d)n.moveAfter(a,c),a=e[++o],d=t[--i];else if(c===l)n.moveBefore(c,a),c=e[--r],l=t[++s];else{const o=e.indexOf(l);-1===o?n.create(l,a):(n.moveBefore(l,a),e[o]=void 0),l=t[++s]}if(o<=r||s<=i)if(o>r)for(;s<=i;s++)n.append(t[s]);else for(;o<=r;o++)e[o]&&n.remove(e[o])}),t.update=((e,n,o,s,r,a=(e=>e.key))=>{const c=[],i=[],l={},d={},u={};e.forEach((e,t)=>{const n=a(e);c.push(n),l[n]=e,u[n]=o.childNodes[t]}),n.forEach(e=>{const t=a(e);i.push(t),d[t]=e}),t.editList(c,i,{keep(e){const t=u[e];r(t,d[e],l[e])},moveBefore(e,t){const n=u[e];r(n,d[e],l[e]),o.insertBefore(n,u[t])},moveAfter(e,t){const n=u[e];r(n,d[e],l[e]),o.insertBefore(u[e],u[t].nextSibling)},remove(e){o.removeChild(u[e])},create(e,t){o.insertBefore(s(d[e]),u[t])},append(e){o.appendChild(s(d[e]))}})})}),d={h:r,hub:o,localHub:()=>{const e=[],t={dispatchEvent:o.dispatchEvent,addEventListener(t,n){e.push(o.addEventListener(t,n))},destroy(){e.forEach(e=>e()),e.length=0}};return t.addEventListener("module-destroy",t.destroy),t},xhr:a,urlstate:i,utils:s,browser:c,keyedList:l},u=d.h,h=d.hub,p=d.localHub,f=d.xhr,m=d.urlstate,g=d.utils,y=d.browser,v=d.keyedList;e.default=d,e.h=u,e.hub=h,e.localHub=p,e.xhr=f,e.urlstate=m,e.utils=g,e.browser=y,e.keyedList=v,Object.defineProperty(e,"__esModule",{value:!0})});
